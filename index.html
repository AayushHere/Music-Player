<html>
    <head>
        <link href="Css/Main.css" rel="stylesheet"/>
        <script src="Css/jquery-1.10.2.min.js"></script>
    </head>
    <body>
        <div id="bg">
            <div id="blackLayer"></div>
            <img src="images/Poster1.jpg"/>
        </div>
       
        <div id="main">
            <div id="image">
                <img src="images/Poster1.jpg"/>
            </div>
            <div id="player">
                <div id="songTitle">Demo</div>
                <div id="buttons">
                    <button id="pre" onclick="pre()"><img src="buttons/Pre.png" height="90%" width="90%"/></button>
                    <button id="play" onclick="playOrPauseSong()"><img src="buttons/Play.png"/></button>
                    <button id="next" onclick="next()"><img src="buttons/Next.png" height="90%" width="90%"/></button>
                </div>
                
                <div id="seek-bar">
                    <div id="fill"></div>
                    <div id="handle"></div>
                </div>
            </div>
        </div>
    </body>
    <script type="text/javascript">
    
        var songs = ["music/Sooraj-dooba-hai-remix.mp3",
		"music/Daru-badnam-remix.mp3","music/Rock-on-title-song.mp3"
		];  
		
        var poster = ["images/Poster1.jpg","images/Poster2.jpg","images/Poster3.jpg"
		];
		
		var songTitle = document.getElementById("songTitle");
        var fillBar = document.getElementById("fill");
        
        var song = new Audio();  // creating Audio class objetc
        var currentSong = 0;
        
        window.onload = playSong;   
        
        function playSong(){
				song.src = songs[currentSong];
				var songNAME= songs[currentSong].substring(6, (songs[currentSong].length)-4); //to display only the name of Song playing.
				songTitle.textContent = songNAME;
				song.play();
        }
        
        function playOrPauseSong(){
			if(song.paused){
                song.play();
                $("#play img").attr("src","buttons/Pause.png");
            }
            else{
                song.pause();
                $("#play img").attr("src","buttons/Play.png");
            }
        }
        
        song.addEventListener('timeupdate',function(){ 
				let position = song.currentTime / song.duration;
				if(position*100==100){
					next(); //calling the function next() to play next song automatically after completion of current song.
				}
				fillBar.style.width = position * 100 +'%';
        });    
    
        function next(){
            
            currentSong++;
            if(currentSong > (songs.length-1)){   
			// if Queue of songs is completed, set the currentSong to first song of Queue.
                currentSong = 0;
            }
            playSong();
            $("#play img").attr("src","buttons/Pause.png");
            $("#image img").attr("src",poster[currentSong]);
            $("#bg img").attr("src",poster[currentSong]);
        }
    
        function pre(){
            currentSong--;
            if(currentSong < (0)){
				
                currentSong = songs.length-1;
            }
            playSong();
            $("#play img").attr("src","buttons/Pause.png");
            $("#image img").attr("src",poster[currentSong]);
            $("#bg img").attr("src",poster[currentSong]);
        }
        
  </script>
</html>